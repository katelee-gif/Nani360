<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>知識點列表｜數學 - Nani學習360</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="knowledge-list.css">
</head>
<body>
    <!-- 背景裝飾 -->
    <div class="bg-decoration"></div>

    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <img src="image/Logo.svg" alt="Nani學習360">
            </div>
            
            <nav class="main-nav">
                <div class="nav-item active">
                    <span>學習</span>
                    <div class="nav-indicator"></div>
                </div>
                <div class="nav-item" onclick="window.location.href='student-report.html'">
                    <span>分析</span>
                </div>
            </nav>
            
            <div class="account-button">
                <img src="image/Icon_Account.svg" alt="帳號">
                <span>王老師</span>
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M4 6L8 10L12 6" stroke="#212B36" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </div>
        </div>
    </header>

    <!-- Subheader -->
    <div class="subheader">
        <div class="subheader-content">
            <div class="subject-tab">
                <div>
                    <img src="image/menu_book.svg" alt="國語">
                    <span>國語</span>
                </div>
            </div>
            <div class="subject-tab active">
                <div>
                    <img src="image/pencil_ruler_solid.svg" alt="數學">
                    <span>數學</span>
                </div>
                <div class="subject-indicator"></div>
            </div>
            <div class="subject-tab">
                <div>
                    <img src="image/seedling_solid.svg" alt="自然">
                    <span>自然</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Container -->
    <main class="main-container">
        <div class="content-wrapper">
            <!-- Page Title -->
            <div class="page-header">
                <h1>知識點列表｜數學</h1>
                <p class="page-description">南一學習 360 提供完整的各學制知識點列表，請直接點擊知識點派發測驗給學生</p>
            </div>

            <!-- Grade Toggle -->
            <div class="grade-toggle">
                <button class="grade-btn active">國小</button>
                <button class="grade-btn">國中</button>
                <button class="grade-btn">高中</button>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Main Content -->
                <div class="main-content">
                    <!-- Filter Section -->
                    <div class="filter-section">
                        <div class="select-wrapper">
                            <label>版本</label>
                            <select>
                                <option>南一</option>
                            </select>
                        </div>
                        <div class="select-wrapper">
                            <label>冊次</label>
                            <select>
                                <option>第十冊（五下）</option>
                            </select>
                        </div>
                    </div>

                    <!-- Knowledge Point Sections -->
                    <div class="knowledge-sections">
                        <!-- Section 1 - 展開狀態 -->
                        <div class="accordion-item expanded">
                            <div class="accordion-header">
                                <h2 class="section-title">第一章 分數的計算</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            
                            <!-- 展開的內容 -->
                            <div class="accordion-content">
                                <!-- 小章節 1 -->
                                <div class="subsection">
                                    <h3 class="subsection-title">[1-1] 用分數表示整數相除的結果</h3>
                                    <div class="knowledge-grid">
                                        <div class="knowledge-card">
                                            <span>用分數表示整數相除的結果</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 小章節 2 -->
                                <div class="subsection">
                                    <h3 class="subsection-title">[1-2] 整數的分數倍</h3>
                                    <div class="knowledge-grid">
                                        <div class="knowledge-card">
                                            <span>用分數表示整數相除的結果（求得分數再乘以整數）</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>帶分數乘以整數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>真分數乘以整數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>解決分數的兩步驟問題（不併式）</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>整數乘以分數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 小章節 3 -->
                                <div class="subsection">
                                    <h3 class="subsection-title">[1-3] 分數的分數倍</h3>
                                    <div class="knowledge-grid">
                                        <div class="knowledge-card">
                                            <span>帶分數乘以整數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>分數乘法中，被乘數、乘數和積的關係</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>解決分數的兩步驟問題（不併式）</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>解決分數的連乘</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>分數除以整數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>分數除以分數（異分母分數）</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>整數乘以分數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>分數乘以分數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- 小章節 4 -->
                                <div class="subsection">
                                    <h3 class="subsection-title">[1-4] 被乘數、乘數和積的關係</h3>
                                    <div class="knowledge-grid">
                                        <div class="knowledge-card">
                                            <span>帶分數乘以整數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>分數乘法中，被乘數、乘數和積的關係</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>整數乘以分數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                        <div class="knowledge-card">
                                            <span>分數乘以分數</span>
                                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
                                                <path d="M7 4L11 9L7 14" stroke="#212B36" stroke-width="2"/>
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="divider"></div>
                        </div>

                        <!-- Section 2 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第二章 小數的乘法</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 3 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第三章 扇形</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 4 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第四章 體積</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 5 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第五章 整數、小數除以整數</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 6 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第六章 生活中的大單位</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 7 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第七章 柱體、錐體和球體</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 8 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第八章 比率和百分率</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 9 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第九章 容積和容量</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>

                        <!-- Section 10 - 收起狀態 -->
                        <div class="accordion-item">
                            <div class="accordion-header">
                                <h2 class="section-title">第十章 長條圖和折線圖</h2>
                                <svg class="accordion-icon" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                    <path d="M7 10L12 15L17 10" stroke="#00A15D" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="divider"></div>
                        </div>
                    </div>
                </div>

                <!-- Sidebar -->
                <aside class="sidebar">
                    <h3>內容目錄</h3>
                    <nav class="sidebar-nav">
                        <a href="#" class="sidebar-item active">第一章 分數的計算</a>
                        <a href="#" class="sidebar-item">第二章 小數的乘法</a>
                        <a href="#" class="sidebar-item">第三章 扇形</a>
                        <a href="#" class="sidebar-item">第四章 體積</a>
                        <a href="#" class="sidebar-item">第五章 整數、小數除以整數</a>
                        <a href="#" class="sidebar-item">第六章 生活中的大單位</a>
                        <a href="#" class="sidebar-item">第七章 柱體、錐體和球體</a>
                        <a href="#" class="sidebar-item">第八章 比率和百分率</a>
                        <a href="#" class="sidebar-item">第九章 容積和容量</a>
                        <a href="#" class="sidebar-item">第十章 長條圖和折線圖</a>
                    </nav>
                </aside>
            </div>
        </div>
    </main>

    <!-- 派出測驗彈窗 -->
    <div class="modal-overlay" id="quizModal">
        <div class="modal-container">
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">派發測驗｜整數乘以分數</h2>
                <button class="modal-close" id="closeModal">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                        <path d="M18 6L6 18M6 6L18 18" stroke="#637381" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="student-list-container">
                    <div class="student-table">
                        <!-- 表格標題 -->
                        <div class="table-header">
                            <div class="table-checkbox">
                                <input type="checkbox" id="selectAll" class="checkbox-input">
                                <label for="selectAll" class="checkbox-label"></label>
                            </div>
                            <div class="table-cell-header">
                                <span>姓名</span>
                            </div>
                        </div>
                        
                        <!-- 學生列表 -->
                        <div class="table-body">
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student1" class="checkbox-input student-checkbox">
                                    <label for="student1" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>鄧玉婷</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student2" class="checkbox-input student-checkbox">
                                    <label for="student2" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>李雪怡</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student3" class="checkbox-input student-checkbox">
                                    <label for="student3" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>謝喬安</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student4" class="checkbox-input student-checkbox">
                                    <label for="student4" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>林智揚</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student5" class="checkbox-input student-checkbox">
                                    <label for="student5" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>李昀芯</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student6" class="checkbox-input student-checkbox">
                                    <label for="student6" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>葉穎彤</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student7" class="checkbox-input student-checkbox">
                                    <label for="student7" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>陳宥廷</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                            
                            <div class="table-row">
                                <div class="table-checkbox">
                                    <input type="checkbox" id="student8" class="checkbox-input student-checkbox">
                                    <label for="student8" class="checkbox-label"></label>
                                </div>
                                <div class="table-cell">
                                    <span>王子豪</span>
                                </div>
                            </div>
                            <div class="divider-line"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="selection-count">
                    <span>已選取 <span id="selectedCount">0</span> 個 / 共 <span id="totalCount">8</span> 個</span>
                </div>
                <div class="modal-actions">
                    <button class="btn-cancel" id="cancelBtn">取消</button>
                    <button class="btn-confirm" id="confirmBtn" disabled>派發</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>© NANI BOOK ENTERPRISE CO., LTD. All Rights Reserved.</p>
            <p class="version">v1.0.0</p>
        </div>
    </footer>

    <script>
        // 手風琴展開/收起功能
        document.querySelectorAll('.accordion-header').forEach(header => {
            header.addEventListener('click', function() {
                const accordionItem = this.parentElement;
                const isExpanded = accordionItem.classList.contains('expanded');
                
                // 收起所有其他的 accordion
                document.querySelectorAll('.accordion-item').forEach(item => {
                    item.classList.remove('expanded');
                });
                
                // 如果當前項目不是展開狀態，則展開它
                if (!isExpanded) {
                    accordionItem.classList.add('expanded');
                }
            });
        });

        // 派出測驗彈窗功能
        const modal = document.getElementById('quizModal');
        const closeModalBtn = document.getElementById('closeModal');
        const cancelBtn = document.getElementById('cancelBtn');
        const confirmBtn = document.getElementById('confirmBtn');
        const selectAllCheckbox = document.getElementById('selectAll');
        const studentCheckboxes = document.querySelectorAll('.student-checkbox');
        const selectedCountSpan = document.getElementById('selectedCount');
        const totalCountSpan = document.getElementById('totalCount');
        const modalTitle = document.getElementById('modalTitle');
        
        // 更新選擇計數
        function updateSelectionCount() {
            const checkedCount = document.querySelectorAll('.student-checkbox:checked').length;
            selectedCountSpan.textContent = checkedCount;
            
            // 根據選擇數量更新派發按鈕狀態
            if (checkedCount > 0) {
                confirmBtn.disabled = false;
                confirmBtn.style.background = '#00A15D';
                confirmBtn.style.color = '#FFFFFF';
            } else {
                confirmBtn.disabled = true;
                confirmBtn.style.background = 'rgba(145, 158, 171, 0.24)';
                confirmBtn.style.color = 'rgba(145, 158, 171, 0.8)';
            }
            
            // 更新全選checkbox狀態
            const allChecked = checkedCount === studentCheckboxes.length;
            const someChecked = checkedCount > 0 && checkedCount < studentCheckboxes.length;
            selectAllCheckbox.checked = allChecked;
            selectAllCheckbox.indeterminate = someChecked;
        }
        
        // 全選/取消全選
        selectAllCheckbox.addEventListener('change', function() {
            studentCheckboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
            });
            updateSelectionCount();
        });
        
        // 學生checkbox變化
        studentCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', updateSelectionCount);
        });
        
        // 為所有「整數乘以分數」的知識卡片添加點擊事件
        document.querySelectorAll('.knowledge-card').forEach(card => {
            const cardText = card.querySelector('span').textContent;
            if (cardText === '整數乘以分數') {
                card.style.cursor = 'pointer';
                card.addEventListener('click', function(e) {
                    e.preventDefault();
                    // 更新彈窗標題
                    modalTitle.textContent = '派發測驗｜' + cardText;
                    // 打開彈窗
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden'; // 防止背景滾動
                    // 重置選擇狀態
                    selectAllCheckbox.checked = false;
                    studentCheckboxes.forEach(cb => cb.checked = false);
                    updateSelectionCount();
                });
            }
        });
        
        // 關閉彈窗功能
        function closeModal() {
            modal.classList.remove('active');
            document.body.style.overflow = ''; // 恢復滾動
        }
        
        closeModalBtn.addEventListener('click', closeModal);
        cancelBtn.addEventListener('click', closeModal);
        
        // 點擊遮罩關閉
        modal.addEventListener('click', function(e) {
            if (e.target === modal) {
                closeModal();
            }
        });
        
        // 確認按鈕（派發測驗）
        confirmBtn.addEventListener('click', function() {
            const selectedStudents = [];
            studentCheckboxes.forEach((checkbox, index) => {
                if (checkbox.checked) {
                    const studentName = checkbox.closest('.table-row').querySelector('.table-cell span').textContent;
                    selectedStudents.push(studentName);
                }
            });
            console.log('派發測驗給：', selectedStudents);
            
            // 儲存選擇的學生資訊（可以用於後續顯示）
            sessionStorage.setItem('selectedStudents', JSON.stringify(selectedStudents));
            sessionStorage.setItem('knowledgePoint', modalTitle.textContent);
            
            // 跳轉到派發成功頁面
            window.location.href = 'success.html';
        });
    </script>
</body>
</html>
